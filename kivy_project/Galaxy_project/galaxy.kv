# importing the necessary modules

#: import settings settings
#: import menu menu
#: import FirstWidget tuto
#: import LoadingWidget tuto
##: import pagelayoutexample pagelayoutexample

# defining the different needed variables

#: set menu_title "G  A  L  A  X  Y"
#: set home_button_title "PLAY"
#: set pause_widget_title "R E S U M E"
#: set settings_button_title "SETTINGS"
#: set return_settings_button_title "BACK"
#: set _bc (.282, .694, .882, .2) #(.180, .525, .757, .3)
#: set _ec (.282, .694, .882, .8)
#: set _bw dp(3)
#: set font "fonts/gtr.ttf"

# The manager of the screen

WindowManager:
    game_window: game_window
    settings_window: settings_window
    FirstWindow:
        id: first_window
    HomeWindow:
        id: home_window
    SettingsWindow:
        id: settings_window
    GameWindow:
        id: game_window
    MenuWindow:
        id: menu_window
    #SecondWindow:
    #    id: second_window
    #Tutorial:
    #    id: tuto


# Window manager

<WindowManager>:

# defining the Screens
<FirstWindow>:
    name: "first"

# Main Window & it's widget

<SettingsWindow>:
    name: "settings_screen"
    canvas.before:
        Rectangle:
            size: self.size
    opacity: 1
    settings_widget: settings_widget
    SettingsWidget:
        id: settings_widget


# the Menu Window

<MenuWindow>:
    name: "menu"
    menu_widget: menu_widget
    #menu_widget_2: menu_widget_2
    menu_title: "G  A  L  A  X  Y"
    menu_button_title: "NEXT"
    MenuWidget:
        id: menu_widget
    MyCustomButton:
        text: "BACK"
        size_hint: .18, .08
        pos_hint: {"x": 0, "top": 1}
        font_size: dp(30)
        on_press: app.root.current = "home_screen"


# the game window

<GameWindow>:
    name: "game_screen"
    main_widget: main_widget
    home_button: home_button
    MainWidget:
        id: main_widget
    HomeButton:
        id: home_button
        on_press:
            app.root.current = "menu"


# home window

<HomeWindow>:
    name: "home_screen"
    canvas.before:
        Rectangle:
            size: self.size
            source: "wallpaper/debris.jpg"
    ExitButton:
        id: exit_button
        on_release: root.exit()
        background_color: 0, 0, 0, 0
    Label:
        font_size: dp(95)
        font_name: font
        text: menu_title
        bold: True
        pos_hint: {"center_x": .495, "top": .985}
        size_hint: 1, .3
        color: 0, 0, 0, .5
    Label:
        font_size: dp(95)
        font_name: font
        text: menu_title
        bold: True
        pos_hint: {"center_x": .5, "top": .99}
        size_hint: 1, .3
    MyCustomButton:
        font_size: dp(30)
        font_name: font
        text: home_button_title
        pos_hint: { "center_x": .5, "center_y": .3}
        size_hint: .18, .08
        background_color: 0, 0, 0, 0
        on_press:
            app.root.current = "menu"
    MyCustomButton:
        font_size: dp(30)
        font_name: font
        text: settings_button_title
        pos_hint: { "right": 1, "top": 1}
        size_hint: .18, .08
        background_color: 0, 0, 0, 0
        on_press: app.root.current = "settings_screen"

# the game widget

<MainWidget>:
    canvas.before:
        Rectangle:
            size: self.size
            source: "galaxy_images/bg1.jpg"
    menu_widget: start_widget
    pause_widget: pause_widget
    pause_button: pause_button
    score_wdgt: score_wdgt
    perspective_point_x: self.width/2
    perspective_point_y: self.height*0.75
    PauseWidget:
        id: pause_widget
    PauseButton:
        id: pause_button
        text: root.pause_button_txt
        on_press:
            root.on_pause_button_pressed()
    StartWidget:
        id: start_widget
    GridLayout:
        id: score_wdgt
        cols: 2
        size_hint: .35, .2
        pos_hint: {"center_x": .5, "top": 1}
        padding: dp(30)
        spacing: dp(10)
        #opacity: 0
        Label:
            text: "S C O R E : "
            font_size: dp(50)
            font_name: font
            size_hint: .65, 1
            pos_hint: {"x": .018, "top": 1}
        Label:
            id: score_txt
            text: root.score_txt
            font_size: dp(65)
            font_name: "fonts/Lcd.ttf"
            size_hint: .35,  1
            pos_hint: {"left": 1, "top": 1}



# the pause widget

<PauseWidget>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, .7
        Rectangle:
            size: self.size
    Label:
        font_size: dp(90)
        font_name: font
        text: pause_widget_title
        pos_hint: {"center_x": 0.5, "center_y": .75}

# The Home Button

<HomeButton@Button>:
    canvas.before:
        Color:
            rgba: _ec
        Line:
            width: dp(1.25)
            rounded_rectangle: (self.x, self.y, self.width, self.height, 10)
            cap: "round"
            joint: "round"
    background_color: 0, 0, 0, 0
    font_size: dp(35)
    font_name: font
    text: return_settings_button_title
    pos_hint: { "left": 1, "top": 1}
    size_hint: .18, .08


# The Exit button

<ExitButton@MyCustomButton>:
    font_size: dp(30)
    font_name: font
    text: "EXIT"
    halign: "center"
    valign: "middle"
    pos_hint: { "x": 0, "top": 1}
    size_hint: .18, .08


# The Pause Button

<PauseButton@MyCustomButton>:
    id: pause_button
    font_name: font
    font_size: dp(30)
    pos_hint: {"right": 1, "top": 1}
    size_hint: .18, .075
    disabled: True

# Creation of all the settings page button
# Management all the buttons on the settings page
# My Custom Button

<MyCustomButton@Button>:
    id: custom_btn
    canvas.before:
        Color:
            rgba: _ec
        Line:
            width: dp(1.25)
            rounded_rectangle: (self.x, self.y, self.width, self.height, 10)
            cap: "round"
            joint: "round"
        Color:
            rgba: .282, .694, .882, .025
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [10, 10, 10, 10]
    background_color: _bc
    background_width: dp(40)
    font_name: font
