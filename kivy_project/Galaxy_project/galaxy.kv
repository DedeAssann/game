# importing the necessary modules

#: import settings settings
#: import menu menu
#: import FirstWidget tuto
#: import LoadingWidget tuto
##: import pagelayoutexample pagelayoutexample

# defining the different needed variables

#: set menu_title "G  A  L  A  X  Y"
#: set home_button_title "P  L  A  Y"
#: set pause_widget_title " R  E  S  U  M  E "
#: set settings_button_title "S  E  T  T  I  N  G  S"
#: set return_settings_button_title "H  O  M  E"
#: set _bc (.180, .525, .757, .3)
#: set _bw dp(3)


# The manager of the screen

WindowManager:
    game_window: game_window
    settings_window: settings_window
    FirstWindow:
        id: first_window
    HomeWindow:
        id: home_window
    SettingsWindow:
        id: settings_window
    GameWindow:
        id: game_window
    SecondWindow:
        id: second_window
    Tutorial:
        id: tuto


# Window manager

<WindowManager>:

# defining the Screens
<FirstWindow>:
    name: "first"

# Main Window & it's widget

<SettingsWindow>:
    name: "settings_screen"
    canvas.before:
        Rectangle:
            size: self.size
    opacity: 1
    settings_widget: settings_widget
    SettingsWidget:
        id: settings_widget


# the game window

<GameWindow>:
    name: "game_screen"
    main_widget: main_widget
    home_button: home_button
    MainWidget:
        id: main_widget
    HomeButton:
        id: home_button
        on_press:
            app.root.current = "home_screen"


# home window

<HomeWindow>:
    name: "home_screen"
    canvas.before:
        Rectangle:
            size: self.size
            source: "galaxy_images/download.jpg"
    ExitButton:
        id: exit_button
        on_release: root.exit()
    Label:
        font_size: dp(80)
        font_name: "fonts/Sackers-Gothic-Std-Light.ttf"
        text: menu_title
        bold: True
        pos_hint: {"center_x": .5, "top": .999}
        size_hint: 1, .3
    MyCustomButton:
        font_size: dp(35)
        font_name: "fonts/Eurostile.ttf"
        text: home_button_title
        pos_hint: { "center_x": .5, "center_y": .3}
        size_hint: .18, .08
        on_press:
            app.root.current = "game_screen"
    MyCustomButton:
        font_size: dp(25)
        font_name: "fonts/Eurostile.ttf"
        text: settings_button_title
        pos_hint: { "right": 1, "top": 1}
        size_hint: .18, .08
        on_press: app.root.current = "settings_screen"

# the game widget

<MainWidget>:
    canvas.before:
        Rectangle:
            size: self.size
            source: "galaxy_images/bg1.jpg"
    menu_widget: menu_widget
    pause_widget: pause_widget
    pause_button: pause_button
    perspective_point_x: self.width/2
    perspective_point_y: self.height*0.75
    PauseWidget:
        id: pause_widget
    PauseButton:
        id: pause_button
        text: root.pause_button_txt
        on_press:
            root.on_pause_button_pressed()
    MenuWidget:
        id: menu_widget
    Label:
        id: score
        text: root.score_txt
        font_size: dp(36)
        font_name: "fonts/Lcd.ttf"
        size_hint: .2, .2
        pos_hint: {"x": .018, "top": 1}


# the pause widget

<PauseWidget>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, .7
        Rectangle:
            size: self.size
    Label:
        font_size: dp(90)
        font_name: "fonts/Sackers-Gothic-Std-Light.ttf"
        text: pause_widget_title
        pos_hint: {"center_x": 0.5, "center_y": .75}

# The Home Button

<HomeButton@MyCustomButton>:
    font_size: dp(32)
    font_name: "fonts/Eurostile.ttf"
    text: return_settings_button_title
    pos_hint: { "right": 1, "top": 1}
    size_hint: .18, .08


# The Exit button

<ExitButton@MyCustomButton>:
    font_size: dp(30)
    font_name: "fonts/Eurostile.ttf"
    text: "E X I T"
    pos_hint: { "right": .18, "top": 1}
    size_hint: .18, .08


# The Pause Button

<PauseButton@MyCustomButton>:
    id: pause_button
    font_name: "fonts/Eurostile.ttf"
    font_size: dp(30)
    pos_hint: {"right": .18, "top": 1}
    size_hint: .18, .075
    disabled: True

# Creation of all the settings page button
# Management all the buttons on the settings page
# My Custom Button
<MyCustomButton@Button>:
    id: custom_btn
    canvas:
        Color:
            rgba: .282, .694, .882, .8
        Line:
            width: dp(1)
            rectangle: self.x, self.y, self.width, self.height
    background_color: _bc
    background_width: dp(40)
