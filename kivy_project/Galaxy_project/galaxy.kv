# importing the necessary modules

#: import settings settings
#: import menu menu
##: import pagelayoutexample pagelayoutexample

# defining the different needed variables

#: set menu_title "G  A  L  A  X  Y"
#: set home_button_title "P  L  A  Y"
#: set pause_widget_title " R  E  S  U  M  E "
#: set settings_button_title "S  E  T  T  I  N  G  S"
#: set return_settings_button_title "H  O  M  E"
#: set _bw dp(3)


# The manager of the screen

WindowManager:
    game_window: game_window
    settings_window: settings_window
    HomeWindow:
    SettingsWindow:
        id: settings_window
    GameWindow:
        id: game_window


# Window manager

<WindowManager>:

# defining the Screens

# Main Window & it's widget

<SettingsWindow>:
    name: "settings_screen"
    canvas.before:
        Color:
            rgba: 0, 0, 0, .3
        Rectangle:
            #source: "bg1.jpg"
            size: self.size
    opacity: 1
    settings_widget: settings_widget
    SettingsWidget:
        id: settings_widget


# the game window

<GameWindow>:
    name: "game_screen"
    main_widget: main_widget
    home_button: home_button
    MainWidget:
        id: main_widget
    HomeButton:
        id: home_button
        on_press:
            app.root.current = "home_screen"


# home window

<HomeWindow>:
    name: "home_screen"
    canvas:
        Rectangle:
            size: self.size
            source: "bg1.jpg"
    ExitButton:
        id: exit_button
        on_release: root.exit()
    Label:
        font_size: dp(60)
        font_name: "fonts/Sackers-Gothic-Std-Light.ttf"
        text: menu_title
        pos_hint: {"center_x": .5, "center_y": .6}
    Button:
        canvas.before:
            Color:
                rgba: .2, .7, 1, .25
            Line:
                width: dp(2)
                rectangle: self.x, self.y, self.width, self.height
        font_size: dp(25)
        font_name: "fonts/Eurostile.ttf"
        text: home_button_title
        pos_hint: { "center_x": .5, "center_y": .3}
        size_hint: .2, .1
        on_press:
            app.root.current = "game_screen"
        background_color: .8, .5, 1, .2
    Button:
        canvas.before:
            Color:
                rgba: .2, .7, 1, .25
            Line:
                width: dp(2)
                rectangle: self.x, self.y, self.width, self.height
        font_size: dp(25)
        font_name: "fonts/Eurostile.ttf"
        text: settings_button_title
        pos_hint: { "right": 1, "top": 1}
        size_hint: .18, .08
        on_press: 
            app.root.current = "settings_screen"
        background_color: .8, .5, 1, .2




# the game widget

<MainWidget>:
    canvas.before:
        Rectangle:
            size: self.size
            source: "bg1.jpg"
    menu_widget: menu_widget
    pause_widget: pause_widget
    pause_button: pause_button
    perspective_point_x: self.width/2
    perspective_point_y: self.height*0.75
    PauseWidget:
        id: pause_widget
    PauseButton:
        id: pause_button
        text: root.pause_button_txt
        on_press:
            root.on_pause_button_pressed()
    MenuWidget:
        id: menu_widget
    Label:
        id: score
        text: root.score_txt
        font_size: dp(32)
        font_name: "fonts/Lcd.ttf"
        size_hint: .2, .2
        pos_hint: {"x": 0, "top": 1}


# the pause widget

<PauseWidget>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, .7
        Rectangle:
            size: self.size
    Label:
        font_size: dp(90)
        font_name: "fonts/Sackers-Gothic-Std-Light.ttf"
        text: pause_widget_title
        pos_hint: {"center_x": 0.5, "center_y": .75}

# The Home Button

<HomeButton>:
    canvas.before:
        Color:
            rgba: .2, .7, 1, .25
        Line:
            width: dp(2)
            rectangle: self.x, self.y, self.width, self.height
    font_size: dp(30)
    font_name: "fonts/Eurostile.ttf"
    text: return_settings_button_title
    pos_hint: { "right": 1, "top": 1}
    size_hint: .18, .08
    background_color: .8, .5, 1, .08


# The Exit button

<ExitButton@Button>:
    canvas.before:
        Color:
            rgba: .2, .7, 1, .25
        Line:
            width: dp(2)
            rectangle: self.x, self.y, self.width, self.height
    font_size: dp(30)
    font_name: "fonts/Eurostile.ttf"
    text: "E X I T"
    pos_hint: { "right": .18, "top": 1}
    size_hint: .18, .08
    background_color: .8, .5, 1, .08


# The Pause Button

<PauseButton>:
    id: pause_button
    canvas.before:
        Color:
            rgba: .2, .7, 1, .25
        Line:
            width: dp(2)
            rectangle: self.x, self.y, self.width, self.height
    font_name: "fonts/Eurostile.ttf"
    font_size: dp(30)
    pos_hint: {"right": .18, "top": 1}
    size_hint: .18, .075
    background_color: .8, .5, 1, .08
    disabled: True

# Creation of all the settings page button
# Management all the buttons on the settings page

