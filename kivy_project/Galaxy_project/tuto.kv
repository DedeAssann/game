#: set _bc (.282, .694, .882, .2)
#: set _ec (.282, .694, .882, .8)
#: set font "fonts/gtr.ttf"

#WindowManager:
#    FirstWindow:
#    SecondWindow:
#    Tutorial:
#
## The manager
#
#<WindowManager>:

<FirstWidget>:
    id: first_widget
    stack: stack
    canvas.before:
        Rectangle:
            size: self.size
            source: "wallpaper/Earth_Mars.jpg"
    Label:
        text: 
            """
            Welcome ! Let's know each other !
            """
        underline: True
        italic: True
        font_name: font
        font_size: dp(40)
        size_hint: 1, .1
        pos_hint: {"center_x": .5, "top": .95}
    ScrollView:
        canvas.before:
            Color:
                rgba: .458, .866, .866, 1
            Line:
                width: dp(1.25)
                rectangle: self.x, self.y, self.width, self.height
        pos_hint: {"center_x": .5, "top": .825}
        size_hint: .95, .7
        do_scroll_x: False
        do_scroll_y: True
        always_overscoll: True
        bar_width: dp(5)
        bar_color: 0, 0, 0, 0
        smooth_scroll_end: dp(8)
        scroll_wheel_distance: dp(45)
        StackLayout:
            id: stack
            canvas.before:
                Color:
                    rgba: 0, 0, 0, .2
                Rectangle:
                    size: self.size
                    pos: self.pos
            size_hint: .925, None
            padding: dp(20)
            spacing: dp(10)
            height: self.minimum_height
            orientation: "lr-tb"
            l1: l1
            l2: l2
            l3: l3
            l4: l4
            l5: l5
            l6: l6
            L_1:
                id: l1
            L_2:
                id: l2
            L_3:
                id: l3
            L_4:
                id: l4
            L_6:
                id: l6
            L_5:
                id: l5
    GridLayout:
        cols: 2
        spacing: dp(800)
        padding: dp(5)
        size_hint: .9, .1
        pos_hint: {"center_x": .5, "top": .11}
        Label:
            center_x: True
            pos_hint: {"x": .25, "center_y": .5}
            size_hint: .055, .655
        Button:
            canvas:
                Color:
                    rgba: .458, .866, .866, 1
                Line:
                    width: dp(1)
                    rectangle: self.x, self.y, self.width, self.height
            text: "NEXT"
            color: .458, .866, .866, 1
            background_color: 0, 0, 0, 0
            font_name: font
            font_size: dp(30)
            pos_hint: {"x": .7, "center_y": .5}
            size_hint: .15, .85
            on_press:                
                root.opacity = 0
            on_release: root.parent.transit_screen()

<MyCustomRelativeLayout@RelativeLayout>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, .2
        Rectangle:
            size: self.size
    pos_hint: None, None
    size_hint: 1, None

<L_1@MyCustomRelativeLayout>:
    last_name: last_name
    Label:
        text:'last name :'.upper()
        font_name: font
        font_size: dp(30)
        pos_hint: {"center_x": .25, "top": .75}
        size_hint: .4, .9
        bold: True
    StringInput:
        id: last_name
        text:''
        on_text_validate: 
            root.parent.l2.first_name.focus = True
            app.store.put("Name of User", name="Name", value=self.text)
<L_2@MyCustomRelativeLayout>:
    first_name: first_name
    Label:
        text:'first name :'.upper()
        font_name: font
        font_size: dp(30)
        pos_hint: {"center_x": .25, "top": .75}
        size_hint: .4, .9
        bold: True        
    StringInput:
        id: first_name
        text:''
        on_text_validate:
            root.parent.l3.mail.focus = True
            app.store.put("Name of User", name="Name", value=first_name.text + " " + root.parent.l1.last_name.text)
<L_3@MyCustomRelativeLayout>:
    mail: mail
    Label:
        text:'E-mail :'.upper()
        font_name: font
        font_size: dp(30)
        pos_hint: {"center_x": .25, "top": .75}
        size_hint: .4, .9
        bold: True    
    TextInput:
        id: mail
        text:''
        canvas.after:
            Color:
                rgba: .458, .866, .866, 1
            Line:
                width: dp(.5)
                rectangle: self.x, self.y, self.width, self.height
        font_name: "fonts/Eurostile.ttf"
        font_size: dp(60)
        bold: True
        size_hint: .5, .65
        pos_hint: {"x": .55, "top": .75}
        multiline: False
        background_color: (0, 0, 0, 0)
        foreground_color: (1, 1, 1, 1)
        color: .458, .866, .866, 1
        cursor_width: dp(3)
        cursor_height: dp(10)
        cursor_color: 1, 1, 1, 1
        on_text_validate:
            root.parent.l4.age.focus = True
            app.store.put("Mail of User", name="Mail", value=self.text)
<L_4@MyCustomRelativeLayout>:
    age: age
    Label:
        text:'age :'.upper()
        font_name: font
        font_size: dp(30)
        pos_hint: {"center_x": .25, "top": .75}
        size_hint: .4, .9
        bold: True        
    FloatInput:
        id: age
        text:''
        font_size: dp(60)
        on_text_validate:
            root.parent.l6.username.focus = True
            app.store.put("Age of User", name="Age", value=self.text)
<L_5@MyCustomRelativeLayout>:
    my_layout: my_layout
    Label:
        text:'Language :'.upper()
        font_name: font
        font_size: dp(30)
        pos_hint: {"center_x": .25, "top": .75}
        size_hint: .4, .9
        bold: True        
    MyLayout:
        id: my_layout
        pos_hint: {"x": .55, "top": .75}
        size_hint: .5, .65
<L_6@MyCustomRelativeLayout>:
    username: username
    Label:
        text: "username :".upper()
        font_name: font
        font_size: dp(30)
        pos_hint: {"center_x": .25, "top": .75}
        size_hint: .4, .9
        bold: True
    TextInput:
        id: username
        text: ""
        canvas.after:
            Color:
                rgba: .458, .866, .866, 1
            Line:
                width: dp(.5)
                rectangle: self.x, self.y, self.width, self.height
        font_name: font
        font_size: dp(47.5)
        size_hint: .5, .65
        pos_hint: {"x": .55, "top": .75}
        multiline: False
        background_color: (0, 0, 0, 0)
        foreground_color: (1, 1, 1, 1)
        color: .458, .866, .866, 1
        cursor_width: dp(3)
        cursor_height: dp(10)
        cursor_color: 1, 1, 1, 1
        on_text_validate: app.store.put("Username", name="Username", value=self.text)
<MyLayout>:
    canvas:
        Color:
            rgba: 0, 0, 0, 0
        Rectangle:
            size: self.size

<MyCustomDropDown>:
    padding: dp(20)
    spacing: dp(50)
    Button:
        canvas.before:
            Color:
                rgba: _ec
            Line:
                width: dp(1.25)
                rectangle: self.x, self.y, self.width, self.height
        background_color: 0, 0, 0, .9
        color: .458, .866, .866, 1
        text: "ENGLISH"
        bold: True
        font_name: font
        font_size: dp(35)
        size_hint_y: None
        height: dp(70)
        on_release:
            root.select(self.text)
            app.store.put("Language", name="Language", value=root.LANGUAGES[self.text])
    Button:
        canvas.before:
            Color:
                rgba: _ec
            Line:
                width: dp(1.25)
                rectangle: self.x, self.y, self.width, self.height    
        background_color: 0, 0, 0, .9
        color: .458, .866, .866, 1
        text: "FRANCAIS"
        bold: True
        font_name: font
        font_size: dp(35)
        size_hint_y: None
        height: dp(70)
        on_release:
            root.select(self.text)
            app.store.put("Language", name="Language", value=root.LANGUAGES[self.text])
    Button:
        canvas.before:
            Color:
                rgba: _ec
            Line:
                width: dp(1.25)
                rectangle: self.x, self.y, self.width, self.height    
        background_color: 0, 0, 0, .9
        color: .458, .866, .866, 1
        text: "ESPANOL"
        bold: True
        font_name: font
        font_size: dp(35)
        size_hint_y: None
        height: dp(70)
        on_release:
            root.select(self.text)
            app.store.put("Language", name="Language", value=root.LANGUAGES[self.text])

<StringInput>:
    #canvas.after:
    #    Color:
    #        rgba: .458, .866, .866, 1
    #    Line:
    #        width: dp(.5)
    #        rectangle: self.x, self.y, self.width, self.height
    font_name: font
    font_size: dp(47.5)
    size_hint: .5, .65
    pos_hint: {"x": .55, "top": .75}
    multiline: False
    background_color: (0, 0, 0, 0)
    foreground_color: (1, 1, 1, 1)
    color: .458, .866, .866, 1
    cursor_width: dp(3)
    cursor_height: dp(10)
    cursor_color: 1, 1, 1, 1

<FloatInput>:
    #canvas.after:
    #    Color:
    #        rgba: .458, .866, .866, 1
    #    Line:
    #        width: dp(.5)
    #        rectangle: self.x, self.y, self.width, self.height
    font_name: "fonts/Lcd.ttf"
    font_size: dp(47.5)
    size_hint: .5, .65
    pos_hint: {"x": .55, "top": .75}
    multiline: False
    background_color: (0, 0, 0, 0)
    foreground_color: (1, 1, 1, 1)
    #color: .458, .866, .866, 1
    cursor_width: dp(3)
    cursor_height: dp(10)
    cursor_color: 1, 1, 1, 1

# 2nd

<SecondWindow>:
    name: "second"
    canvas.before:
        Rectangle:
            size: self.size
            source: "galaxy_images\planet1.jpg"
    third_widget: third_widget
    ThirdWidget:
        id: third_widget


<SecondWidget>:
    pos: root.pos
    size: root.size
    canvas.before:
        Rectangle:
            size: self.size
            source: "kivy_project\Galaxy_project\galaxy_images\planet1.jpg"
    RelativeLayout:
        canvas.before:
            Color:
                rgba: .2, .5, .8, .5
            Line:
                width: dp(2)
                rectangle: self.x, self.y, self.width, self.height
        width: root.width
        height: root.height
        Label:
            size_hint: .985, .95
            pos_hint: {"center_x": .5, "top": .975}
            text: root.wlcm_text
            font_name: font
            font_size: dp(52)
            halign: "center"
            valign: "middle"
            bold: True
            text_size: self.width, None
            size_hint: 1, None
            height: self.texture_size[1]

<ThirdWidget>:
    scroll_eula: root.scroll_eula
    opacity: 0
    ScrollView:
        id: scroll_eula        
        size_hint: .965, 1
        pos_hint: {"center_x": .5, "center_y": .5}
        do_scroll_x: False
        do_scroll_y: True
        always_overscoll: True
        bar_width: dp(6.5)
        bar_color: 0, 0, 0, 1
        smooth_scroll_end: dp(10)
        scroll_wheel_distance: dp(60)
        StackLayout:
            size_hint: .95, None
            padding: dp(20)
            spacing: dp(10)
            height: self.minimum_height
            orientation: "lr-tb"
            Label:
                text: root.eula_text
                text_size: self.width, None
                size_hint: 1, None
                height: self.texture_size[1]
                font_size: dp(35)
                font_name: font
                halign: "justify"
                valign: "center"
            MyCustomRelativeLayout:
                cols: 3
                spacing: dp(200)
                padding: dp(50)
                size_hint: .9, None
                pos_hint: {"center_x": .5, "top": .11}
                CheckBox:
                    id: agree
                    sensitivity: "handle"
                    size_hint: .3, 1
                    pos_hint: {"x": .01, "center_y": .5}
                    color: .458, .866, .866, 1
                    width: dp(2)
                    height: dp(200)
                    active: False
                Label:
                    text: "I agree !".capitalize()
                    font_size: dp(35)
                    color: .458, .866, .866, 1
                    font_name: font
                    pos_hint: {"x": .075, "center_y": .5}
                    size_hint: .4, 1
                Button:
                    canvas:
                        Color:
                            rgba: .458, .866, .866, 1
                        Line:
                            width: dp(.5)
                            rectangle: self.x, self.y, self.width, self.height
                    background_color: 0, 0, 0, 0
                    color: .458, .866, .866, 1
                    text: "NEXT"
                    font_name: font
                    font_size: dp(30)
                    pos_hint: {"x": .8, "center_y": .5}
                    size_hint: .3, .5
                    disabled: not agree.active
                    on_press: root.parent.manager.current = "tuto"

<TransitionWidget>:
    canvas.before:
        Rectangle:
            size: self.size
            source: "wallpaper/milano.jpg"


<LoadingWidget>:
    canvas.before:
        Rectangle:
            size: self.size
            source: "wallpaper/milano.jpg"


<SyncLabel>:
    canvas.after:
        Color:
            rgba: .458, .866, .866, 1
        Line:
            width: dp(2)
            rectangle: self.x, self.y, self.width, self.height
    text: "SYNCHRONIZING ..."
    font_size: dp(40)
    font_name: font
    bold: True
    size_hint: None, None
    size: self.texture_size[0] + dp(10), self.texture_size[1] + dp(5)
    pos_hint: {"center":(.5, .5)}
    canvas.before:
        Rotate:
            angle: self.angle
            origin: self.center

# Tuto

<Tutorial>:
    name: "tuto"
    canvas:
        Rectangle:
            size: self.size
            source: "galaxy_images\planet1.jpg"
    tuto_01: tuto_01
    Tutorial01:
        id: tuto_01

<PreTutorial>:
    size_hint: 1, 1
    pos_hint: {"left": .95, "top": .95}
    BoxLayout:
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(35)
        Label:
            text: "WELCOME"
            valign: "middle"
            size_hint: 1, .2
            color: .458, .866, .866, 1
            font_size: dp(85)
            font_name: font
        Label:
            text: "TO THE"
            valign: "middle"
            size_hint: 1, .15
            color: .458, .866, .866, 1
            font_size: dp(85)
            font_name: font
        Label:
            text: "G  A  L  A  X  Y"
            valign: "middle"
            size_hint: 1, .25
            color: .458, .866, .866, 1
            font_size: dp(105)
            font_name: font
        Label:
            text: "G A M E"
            valign: "middle"
            size_hint: 1, .2
            font_size: dp(85)
            color: .458, .866, .866, 1
            font_name: font
        Label:
            text: "Let's Begin !"
            valign: "middle"
            size_hint: 1, .2
            font_size: dp(87.5)
            color: .458, .866, .866, 1
            font_name: font


<Tutorial01>:
    size_hint: 1, 1
    pos_hint: {"left": .95, "top": 1}
    padding: dp(100)
    BoxLayout:
        orientation: "vertical"
        spacing_y: dp(75)
        padding: dp(15)
        spacing_x: dp(30)
        Label:
            text:
                "How to play ?"
            valign: "top"
            halign: "justify"
            font_name: font
            font_size: dp(90)
            color: .458, .866, .866, 1
            underline: True
        Label:
            text: 
                "- To go left, press left arrow or the left side of the screen."
            valign: "center"
            halign: "justify"
            font_name: font
            text_size: self.width, None
            font_size: dp(40)
            #color: .458, .866, .866, 1
        Label:
            text: 
                "- To go right, press right arrow or the right side of the screen."
            valign: "center"
            halign: "justify"
            font_name: font
            text_size: self.width, None
            font_size: dp(40)
            #color: .458, .866, .866, 1
        Label:
            text:
                "- But, always remember to keep following the track !"
            valign: "center"
            halign: "justify"
            font_name: font
            text_size: self.width, None
            font_size: dp(40)
            #color: .458, .866, .866, 1

    GridLayout:
        cols: 2
        spacing: dp(800)
        padding: dp(5)
        size_hint: .9, .1
        pos_hint: {"center_x": .5, "top": .11}
        Label:
            center_x: True
            pos_hint: {"x": .25, "center_y": .5}
            size_hint: .055, .655
        Button:
            canvas.before:
                Color:
                    rgba: 0.458, 0.866, 0.866, 1
                Line:
                    width: dp(1.15)
                    rectangle: self.x, self.y, self.width, self.height
            text: "NEXT"            
            background_color: 0, 0, 0, 0
            bold: True
            font_name: font
            font_size: dp(37.5)
            pos_hint: {"x": .7, "center_y": .5}
            size_hint: .15, .85
            on_release: app.root.current = "home_screen"
